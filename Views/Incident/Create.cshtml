@model BankOpsPlus.Models.Incident
@{
    ViewData["Title"] = "Créer un Incident";
}

<div class="container mt-4">
    <h1>➕ Créer un Incident</h1>

    <div class="card mt-4">
        <div class="card-body">
            <form asp-action="Create" method="post">
                <div class="mb-3">
                    <label class="form-label">Application *</label>
                    <select asp-for="ApplicationId" class="form-select" required>
                        <option value="">Sélectionnez une application</option>
                        @foreach (var app in ViewBag.Applications)
                        {
                            <option value="@app.Id">@app.Name (@app.Code)</option>
                        }
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label">Job (optionnel)</label>
                    <select asp-for="JobId" class="form-select">
                        <option value="">Aucun</option>
                        @foreach (var job in ViewBag.Jobs)
                        {
                            <option value="@job.Id">@job.Name</option>
                        }
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label">Gravité *</label>
                    <select asp-for="Severity" class="form-select" required>
                        <option value="Low">Low</option>
                        <option value="Medium" selected>Medium</option>
                        <option value="Critical">Critical</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label">Description *</label>
                    <textarea asp-for="Description" class="form-control" rows="4" required></textarea>
                </div>

                <div class="mb-3">
                    <label class="form-label">Assigné à</label>
                    <select asp-for="AssignedToUserId" class="form-select">
                        <option value="">Non assigné</option>
                        @foreach (var user in ViewBag.Users)
                        {
                            <option value="@user.Id">@user.Name (@user.Role)</option>
                        }
                    </select>
                </div>

                <div class="d-flex gap-2">
                    <button type="submit" class="btn btn-success">Créer</button>
                    <a href="@Url.Action("Index")" class="btn btn-secondary">Annuler</a>
                </div>
            </form>
        </div>
    </div>
</div>
